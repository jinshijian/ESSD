---
title: "Rh analysis"
author: "JJ"
date: "4/14/2020"
output: html_document
---

# loading necessary packages
```{r preliminaries, message=FALSE, echo=FALSE}
library(readxl)
library(styler)
library(ggplot2)
theme_set(theme_bw())
library(cowplot)
library(tidyr)
library(dplyr)
library(cowplot)
library(data.table)
library(lubridate)
library(kableExtra)
library(knitr)
library(ggpubr)
library(ggmap)
library(maps)
library(mapdata)
library(leaflet)
library(sp)
# Source all needed functions
source('functions.R')
# set data and outputs file direction
DATA_DIR <- 'data'
OUT_DIR <- 'outputs'
# Set chunks defaults; these options will be applied to all subsequent chunks
knitr::opts_chunk$set(results = 'hide', message = TRUE, include = TRUE, 
                      echo = FALSE, warning = FALSE,
                      fig.height = 4, fig.width = 8, cache = FALSE)
```

# Prepare data
## get MGRhD
```{r get MGRhD}
srdbv5 <- readd(srdbv5)
MGRhD <- readd(MGRhD)
rhchecked <- readd(rhchecked)
``` 

## get Meas_Month based on DOY



# Global Rh project analysis
# Find out those studies seperated Rh and Ra from Rs but not covered a whole year
```{r plot Rh sites}
# plot word background map
mgrhd_site(srdbv5)
```

## Rh vs Tsoil by month and hetmosphere
```{r, fig.height=12, fig.width=6}
MGRhD %>% 
  ggplot(aes(Tsoil, Rh_Norm)) +
  geom_point(alpha = 0.25) +
  facet_grid(rows = vars(Meas_Month2),
             scales = "free")

MGRhD %>% 
  ggplot(aes(Tsoil, Ra_Norm)) +
  geom_point(alpha = 0.25) +
  facet_grid(rows = vars(Meas_Month2),
             scales = "free")
```



